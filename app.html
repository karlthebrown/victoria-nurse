<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="Cache-Control" content="no-store, max-age=0"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>Victoria Nurse â€” We Care Together</title>

  <script>window.__VN_VER__="2025-09-17-49";</script>
  <link rel="manifest" href="./manifest.webmanifest?v=2025-09-17-49"/>
  <meta name="theme-color" content="#0EA5E9"/>
  <link rel="icon" type="image/png" href="./icons/favicon.png?v=2025-09-17-49"/>
  <link rel="apple-touch-icon" sizes="180x180" href="./icons/icon-180.png?v=2025-09-17-49"/>

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

  <style>
    :root{ --med-teal:#14B8A6; --med-sky:#0EA5E9; --med-indigo:#1E40AF; }
    body { background:#f9fafb; }
    .gradient-text {
      background:linear-gradient(90deg, var(--med-indigo), var(--med-sky), var(--med-teal));
      -webkit-background-clip:text; -webkit-text-fill-color:transparent;
    }
    .vn-field{ padding:.9rem 1rem; border-radius:.8rem; border:1px solid #cbd5e1; background:#fff; line-height:1.5rem; }
    .vn-field:focus{ outline:none; box-shadow:0 0 0 2px var(--med-sky); }
    .btn-grad{ background-image:linear-gradient(90deg, var(--med-teal), var(--med-sky), var(--med-indigo)); color:#fff; font-weight:600; padding:.9rem 1.2rem; border-radius:1rem; box-shadow:0 6px 18px rgba(0,0,0,.2); transition:all .15s; }
    .btn-grad:hover{ opacity:.97; transform:translateY(-1px); }
    .btn-grad:active{ transform:translateY(0) scale(.98); }
    .dropdown { position:relative; display:inline-block; }
    .dropdown-menu {
      display:none; position:absolute; right:0; margin-top:.5rem;
      background:white; border-radius:.6rem; box-shadow:0 4px 12px rgba(0,0,0,.1);
      overflow:hidden; z-index:50;
    }
    .dropdown.open .dropdown-menu{ display:block; }
    .dropdown-menu a { display:block; padding:.6rem 1rem; color:#334155; text-decoration:none; font-size:.9rem; }
    .dropdown-menu a:hover { background:#f1f5f9; }
  </style>
</head>

<body class="min-h-screen text-slate-900 antialiased">
  <div class="min-h-screen p-4 flex items-center justify-center">
    <main class="w-full max-w-3xl">
      <div class="bg-white/90 backdrop-blur-xl shadow-2xl rounded-3xl overflow-hidden ring-1 ring-white/40">

        <!-- Header -->
        <header class="p-6 flex items-center justify-between" style="background:linear-gradient(90deg, var(--med-teal), var(--med-sky), var(--med-indigo));">
          <div class="flex items-center gap-4">
            <a href="./index.html" aria-label="Home">
              <img src="./icons/icon-192.png?v=2025-09-17-49" alt="Victoria Nurse" class="h-14 w-14 rounded-2xl shadow"/>
            </a>
            <div>
              <h1 class="gradient-text text-2xl font-extrabold tracking-tight">Victoria Nurse</h1>
              <p class="gradient-text text-sm">We Care Together</p>
            </div>
          </div>
          <!-- Settings dropdown -->
          <div class="dropdown" id="settingsMenu">
            <button class="text-white text-xl">âš™</button>
            <div class="dropdown-menu">
              <a href="#">Branding & Footer</a>
              <a href="#">Theme</a>
              <a href="./help.html">Help</a>
            </div>
          </div>
        </header>

        <!-- Form -->
        <section class="p-6 grid gap-6" role="form" aria-label="Patient Vitals Form">
          <form id="formVitals" class="grid gap-6" autocomplete="off" novalidate>
            <div>
              <label class="block text-sm font-semibold mb-1">Patient Name</label>
              <input id="patientName" type="text" placeholder="Enter full name" class="vn-field w-full"/>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div><label class="block text-sm font-semibold mb-1">Temperature (Â°C)</label>
                <input id="temperature" type="number" step="0.1" class="vn-field w-full"/></div>
              <div><label class="block text-sm font-semibold mb-1">Pulse (bpm)</label>
                <input id="pulse" type="number" class="vn-field w-full"/></div>
              <div><label class="block text-sm font-semibold mb-1">Respiratory Rate</label>
                <input id="respiratoryRate" type="number" class="vn-field w-full"/></div>
              <div><label class="block text-sm font-semibold mb-1">Blood Pressure (mmHg)</label>
                <div class="grid grid-cols-2 gap-2">
                  <input id="sbp" type="number" placeholder="SBP" class="vn-field w-full"/>
                  <input id="dbp" type="number" placeholder="DBP" class="vn-field w-full"/>
                </div>
              </div>
              <div><label class="block text-sm font-semibold mb-1">Oxygen Saturation (%)</label>
                <input id="oxygenSaturation" type="number" class="vn-field w-full"/></div>
              <div><label class="block text-sm font-semibold mb-1">Blood Sugar (mg/dL)</label>
                <input id="bloodSugar" type="number" class="vn-field w-full"/></div>
              <div><label class="block text-sm font-semibold mb-1">Weight (kg)</label>
                <input id="weight" type="number" class="vn-field w-full"/></div>
              <div class="md:col-span-2"><label class="block text-sm font-semibold mb-1">Pain (0â€“10)</label>
                <input id="pain" type="number" min="0" max="10" class="vn-field w-full"/></div>
            </div>

            <!-- Meds -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div><label class="block text-sm font-semibold mb-1">Morning Meds</label>
                <input id="medMorning" class="vn-field w-full"/></div>
              <div><label class="block text-sm font-semibold mb-1">Afternoon Meds</label>
                <input id="medAfternoon" class="vn-field w-full"/></div>
              <div><label class="block text-sm font-semibold mb-1">Evening Meds</label>
                <input id="medEvening" class="vn-field w-full"/></div>
            </div>

            <div>
              <label class="block text-sm font-semibold mb-1">Notes</label>
              <textarea id="notes" rows="6" class="vn-field w-full"></textarea>
            </div>

            <div>
              <label class="block text-sm font-semibold mb-1">Prepared by (Nurse)</label>
              <input id="nurseName" type="text" class="vn-field w-full"/>
              <label class="inline-flex items-center mt-2 text-sm">
                <input type="checkbox" id="rememberMe" class="mr-2"> Remember Me (7 days)
              </label>
            </div>

            <!-- Buttons -->
            <div class="flex flex-col sm:flex-row gap-3">
              <button id="btnPreview" type="button" class="btn-grad flex-1">Preview & PDF</button>
              <button id="btnWhatsApp" type="button" class="btn-grad flex-1">Share WhatsApp</button>
              <button id="btnEmail" type="button" class="btn-grad flex-1">Share Email</button>
            </div>

            <!-- Dictate -->
            <div class="mt-3">
              <button id="btnDictate" type="button" class="btn-grad w-full">ðŸŽ¤ Dictate</button>
            </div>
          </form>
        </section>

        <!-- Footer -->
        <footer class="px-6 py-4 bg-white/70 text-sm flex items-center justify-between">
          <span class="font-medium" style="color:#0EA5E9">&copy; <span id="year"></span> Victoria Nurse</span>
          <span class="italic" style="color:#0EA5E9">Powered by: karlthebrown</span>
        </footer>
      </div>
    </main>
  </div>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
    const el=id=>document.getElementById(id);

    // Settings dropdown
    const dd=document.getElementById('settingsMenu');
    dd.querySelector('button').addEventListener('click',()=>dd.classList.toggle('open'));

    // Remember Me â€” save nurse/patient for 7 days
    const EXP=7*24*60*60*1000;
    function saveLocal(){
      if(!el('rememberMe').checked) return;
      const data={nurse:el('nurseName').value, patient:el('patientName').value, ts:Date.now()};
      localStorage.setItem('vn_mem',JSON.stringify(data));
    }
    function loadLocal(){
      const d=JSON.parse(localStorage.getItem('vn_mem')||'{}');
      if(d.ts && Date.now()-d.ts<EXP){
        if(d.nurse) el('nurseName').value=d.nurse;
        if(d.patient) el('patientName').value=d.patient;
        el('rememberMe').checked=true;
      }
    }
    loadLocal();

    function isOnline(){ return navigator.onLine; }
    function notify(msg){ alert(msg); }

    // Dummy PDF builder
    async function makePdf(rec){ const {jsPDF}=window.jspdf; const pdf=new jsPDF(); pdf.text("Victoria Nurse Report",20,20); return pdf.output('blob'); }

    function buildRecord(){ return { nurse:el('nurseName').value, patient:el('patientName').value, notes:el('notes').value }; }

    // Sharing
    el('btnPreview').addEventListener('click',async()=>{ saveLocal(); const pdf=await makePdf(buildRecord()); const url=URL.createObjectURL(pdf); const a=document.createElement('a'); a.href=url; a.download="report.pdf"; a.click(); setTimeout(()=>URL.revokeObjectURL(url),2000); });
    el('btnWhatsApp').addEventListener('click',()=>{ saveLocal(); if(!isOnline()) return notify("Youâ€™re offline â€” try again later"); window.open(`https://wa.me/?text=${encodeURIComponent("Vitals shared")}`,'_blank'); });
    el('btnEmail').addEventListener('click',()=>{ saveLocal(); if(!isOnline()) return notify("Youâ€™re offline â€” try again later"); window.location.href=`mailto:?subject=Patient Vitals&body=${encodeURIComponent("See attached")}`; });

    // Dictation
    el('btnDictate').addEventListener('click',()=>{ if(!('webkitSpeechRecognition'in window)){return notify("Speech not supported");} const r=new webkitSpeechRecognition(); r.continuous=false; r.lang='en-US'; r.start(); r.onresult=e=>{el('notes').value+=(el('notes').value?" ":"")+e.results[0][0].transcript;}; });

  </script>
</body>
</html>