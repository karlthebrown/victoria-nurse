<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>Victoria Nurse ‚Äî We Care Together</title>

  <!-- Version -->
  <script>window.__VN_VER__="2025-09-17-51";</script>

  <!-- PWA + Icons -->
  <link rel="manifest" href="./manifest.webmanifest?v=2025-09-17-51"/>
  <meta name="theme-color" content="#0EA5E9"/>
  <link rel="icon" type="image/png" href="./icons/favicon.png?v=2025-09-17-51"/>
  <link rel="apple-touch-icon" sizes="180x180" href="./icons/icon-180.png?v=2025-09-17-51"/>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

  <style>
    :root{ --med-teal:#14B8A6; --med-sky:#0EA5E9; --med-indigo:#1E40AF; --label:#0891B2; }
    body { background:#f9fafb; color:#1f2937; }
    .gradient-text { background:linear-gradient(90deg,#14B8A6,#0EA5E9,#1E40AF); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
    .vn-field{ padding:.9rem 1rem; border-radius:.8rem; border:1px solid #cbd5e1; background:#fff; }
    .vn-input{ height:3rem; }
    .btn-grad{ background-image:linear-gradient(90deg,var(--med-teal),var(--med-sky),var(--med-indigo)); color:#fff; font-weight:700; padding:.7rem 1rem; border-radius:999px; transition:all .15s; }
    .btn-grad:hover{ opacity:.95; transform:translateY(-1px); }
    .btn-grad:active{ transform:translateY(0) scale(.97); }
    .dropdown-menu{ position:absolute; right:0; top:100%; margin-top:.5rem; background:white; border:1px solid #e5e7eb; border-radius:.75rem; box-shadow:0 8px 18px rgba(0,0,0,.1); display:none; min-width:200px; }
    .dropdown.open .dropdown-menu{ display:block; }
    .dropdown-item{ display:block; width:100%; padding:.6rem 1rem; text-align:left; }
    .dropdown-item:hover{ background:#f1f5f9; }
  </style>
</head>

<body class="min-h-screen antialiased">
  <div class="max-w-3xl mx-auto p-4">
    <div class="bg-white rounded-2xl shadow-xl overflow-hidden">

      <!-- Header -->
      <header class="p-6 flex items-center justify-between bg-gradient-to-r from-teal-500 via-sky-500 to-indigo-800">
        <div class="flex items-center gap-3">
          <a href="./index.html?v=2025-09-17-51">
            <img src="./icons/icon-192.png?v=2025-09-17-51" class="h-12 w-12 rounded-xl shadow" alt="Logo"/>
          </a>
          <div>
            <h1 class="gradient-text text-xl font-extrabold">Victoria Nurse</h1>
            <p class="gradient-text text-sm">We Care Together</p>
          </div>
        </div>
        <!-- Settings dropdown -->
        <div class="relative dropdown" id="settingsWrap">
          <button id="settingsBtn" class="text-white text-xl">‚öô</button>
          <div class="dropdown-menu" id="settingsMenu">
            <button class="dropdown-item">Branding & Footer</button>
            <button class="dropdown-item">Theme</button>
            <a href="./help.html?v=2025-09-17-51" class="dropdown-item">Help</a>
          </div>
        </div>
      </header>

      <!-- Form -->
      <section class="p-6 space-y-6">
        <form id="formVitals" class="space-y-6">
          <div>
            <label class="block text-sm font-semibold mb-1">Patient Name</label>
            <input id="patientName" class="vn-field vn-input w-full" placeholder="Enter full name"/>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div><label class="block text-sm mb-1">Temperature (¬∞C)</label>
              <input id="temperature" type="number" class="vn-field vn-input w-full"/></div>
            <div><label class="block text-sm mb-1">Pulse (bpm)</label>
              <input id="pulse" type="number" class="vn-field vn-input w-full"/></div>
          </div>

          <div>
            <label class="block text-sm mb-1">Notes</label>
            <textarea id="notes" rows="5" class="vn-field w-full"></textarea>
            <button type="button" id="btnDictate" class="btn-grad mt-2">üéôÔ∏è Dictate</button>
          </div>

          <div>
            <label class="block text-sm mb-1">Nurse‚Äôs Name</label>
            <input id="nurseName" class="vn-field vn-input w-full" placeholder="Enter nurse name"/>
          </div>

          <div class="flex flex-col sm:flex-row gap-3">
            <button type="button" id="btnPreview" class="btn-grad flex-1">Preview & PDF</button>
            <button type="button" id="btnWhatsApp" class="btn-grad flex-1">WhatsApp</button>
            <button type="button" id="btnEmail" class="btn-grad flex-1">Email</button>
          </div>
        </form>
      </section>

      <footer class="px-6 py-4 bg-slate-100 text-sm text-slate-600 flex justify-between">
        <span>&copy; <span id="year"></span> Victoria Nurse</span>
        <span class="italic">Powered by: karlthebrown</span>
      </footer>
    </div>
  </div>

  <!-- Script -->
  <script>
    document.getElementById("year").textContent = new Date().getFullYear();

    // Dropdown toggle
    const wrap=document.getElementById("settingsWrap");
    const btn=document.getElementById("settingsBtn");
    btn.addEventListener("click", e=>{
      e.stopPropagation(); wrap.classList.toggle("open");
    });
    document.addEventListener("click", e=>{
      if(!wrap.contains(e.target)) wrap.classList.remove("open");
    });

    // Dictation
    const dictBtn=document.getElementById("btnDictate");
    if(!("webkitSpeechRecognition" in window || "SpeechRecognition" in window)){
      dictBtn.disabled=true; dictBtn.textContent="üéôÔ∏è Dictation not supported";
    }

    // Build record
    function getRecord(){
      return {
        patient:document.getElementById("patientName").value,
        temp:document.getElementById("temperature").value,
        pulse:document.getElementById("pulse").value,
        notes:document.getElementById("notes").value,
        nurse:document.getElementById("nurseName").value
      };
    }

    // Share text
    function buildText(r){
      return `Victoria Nurse\nPatient: ${r.patient}\nTemp: ${r.temp} ¬∞C, Pulse: ${r.pulse} bpm\nNotes: ${r.notes}\nPrepared by: ${r.nurse}`;
    }

    // PDF
    document.getElementById("btnPreview").addEventListener("click", async()=>{
      const rec=getRecord(); const { jsPDF }=window.jspdf; const pdf=new jsPDF();
      pdf.text("Victoria Nurse",20,20); pdf.text(buildText(rec),20,40);
      pdf.save("Victoria_Nurse.pdf");
    });

    // WhatsApp
    document.getElementById("btnWhatsApp").addEventListener("click", ()=>{
      const rec=getRecord(); const url=`https://wa.me/?text=${encodeURIComponent(buildText(rec))}`;
      window.open(url,"_blank");
    });

    // Email
    document.getElementById("btnEmail").addEventListener("click", ()=>{
      const rec=getRecord(); const subj="Patient Vitals"; const body=buildText(rec);
      window.location.href=`mailto:?subject=${encodeURIComponent(subj)}&body=${encodeURIComponent(body)}`;
    });
  </script>
</body>
</html>