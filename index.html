<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Victoria Nurse — Care Together. Stay Together.</title>
  <style>
    :root{
      --teal-300:#5ecfc6; --teal-500:#10afa0; --teal-600:#0e998c; --teal-700:#0b7f74;
      --blue-400:#3aa9ff; --accent:#ff6b57;
      --slate-800:#1f2937; --slate-700:#334155; --slate-600:#475569; --slate-500:#64748b;
      --bg:#ffffff; --muted:#f8fafc; --border:#e6eef5;
      --grad: linear-gradient(135deg, var(--teal-500), var(--blue-400));
      --ring: 0 0 0 4px rgba(16,175,160,.12);
      --orange-500:#f97316;
    }
    *{box-sizing:border-box}
    body{
      margin:0; background:var(--bg); color:var(--slate-700);
      font-family: system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Ubuntu,"Noto Sans",sans-serif;
      padding-left: env(safe-area-inset-left); padding-right: env(safe-area-inset-right);
    }

    /* Header with logo + tagline (top-left) */
    header{
      display:flex; align-items:flex-start; gap:.8rem;
      padding: 1rem clamp(1rem, 3vw, 2rem);
      border-bottom:1px solid var(--border);
      background:#fff; position:sticky; top:0; z-index:10;
    }
    .logo{
      width:46px; height:46px; border-radius:14px; background:#fff;
      display:grid; place-items:center; box-shadow:0 8px 22px rgba(0,0,0,.06), inset 0 0 0 6px rgba(16,175,160,.14);
    }
    .logo svg{width:26px; height:26px; color:var(--teal-600)}
    .brand{
      line-height:1.1;
    }
    .brand .tagline{
      font-weight:800; font-size:1.1rem; letter-spacing:.2px;
    }
    .brand .tagline .care{
      background: var(--grad); -webkit-background-clip:text; background-clip:text; color:transparent;
    }
    .brand .tagline .stay{ color: var(--accent); }

    /* Top nav buttons (scroll to sections) */
    .topnav{
      padding: .6rem clamp(1rem, 3vw, 2rem);
      display:flex; gap:.6rem; flex-wrap:wrap;
      border-bottom:1px solid var(--border); background:#fff;
    }
    .navbtn{
      padding:.7rem 1rem; border-radius:12px; border:1px solid transparent;
      background: var(--grad); color:#fff; font-weight:700; cursor:pointer;
      box-shadow: 0 8px 20px rgba(58,169,255,.22), 0 6px 14px rgba(16,175,160,.22);
      transition: transform .12s ease, box-shadow .12s ease, background .12s ease, color .12s ease;
    }
    .navbtn:hover{ transform: translateY(-1px); }
    /* When active section is in view, dim that button (others stay beautiful teal gradient) */
    .navbtn[data-active="true"]{
      background:#fff; color:var(--teal-700); border-color:var(--teal-300);
      box-shadow:none;
    }

    main{ padding: 1.2rem clamp(1rem, 3vw, 2rem) 3rem; max-width:1100px; margin:0 auto; }
    .card{
      background:#fff; border:1px solid var(--border); border-radius:18px;
      padding: clamp(1rem, 2vw, 1.5rem); box-shadow:0 10px 28px rgba(2,8,23,.03); margin-bottom:1rem;
    }
    h2.section-title{
      margin:0 0 .75rem; font-size:1.05rem; font-weight:800; color:var(--teal-700);
    }

    form{ display:grid; gap:1rem; }
    .grid{ display:grid; gap:1rem; }
    .cols-2{ grid-template-columns: repeat(2, minmax(0,1fr));}
    .cols-3{ grid-template-columns: repeat(3, minmax(0,1fr));}
    @media (max-width: 720px){ .cols-2,.cols-3{ grid-template-columns: 1fr; } }

    label{ display:block; font-size:.9rem; font-weight:700; color:var(--slate-600); margin-bottom:.45rem; }
    .hint{ font-size:.8rem; color:var(--slate-500); margin-top:.35rem;}

    input, select, textarea{
      width:100%; padding:.8rem .9rem; border-radius: 12px; border:1.5px solid #e7eef7;
      background:#fff; color: var(--slate-800); outline:none;
      transition: border-color .15s, box-shadow .15s, background .15s; box-shadow: inset 0 0 0 0 rgba(0,0,0,0);
      -webkit-tap-highlight-color: transparent;
    }
    textarea{ min-height:110px; resize:vertical; }
    input:focus, select:focus, textarea:focus{ border-color: transparent; box-shadow: var(--ring), 0 0 0 1.5px var(--teal-500); }

    /* Teal emphasis for Week-of & Date inputs */
    .teal-input{
      border-color: var(--teal-300); color: var(--teal-700);
      background:
        linear-gradient(#fff,#fff) padding-box,
        linear-gradient(135deg, var(--teal-300), var(--teal-500)) border-box;
      border:1.5px solid transparent;
    }
    .teal-input:focus{ box-shadow: var(--ring), 0 0 0 1.5px var(--teal-500); }

    .actions{ display:flex; gap:.75rem; flex-wrap:wrap; justify-content:flex-end; margin-top:.5rem; }
    .btn{
      display:inline-block; padding:.85rem 1.1rem; border-radius:12px; border:0; background: var(--grad);
      color:#fff; font-weight:700; letter-spacing:.2px;
      box-shadow: 0 10px 24px rgba(58,169,255,.25), 0 6px 14px rgba(16,175,160,.28);
      cursor:pointer; transition: transform .12s, box-shadow .12s, opacity .12s;
    }
    .btn:hover{ transform: translateY(-1px); }
    .btn-ghost{ background:var(--muted); color:var(--slate-700); border:1px solid var(--border); box-shadow:none; }

    footer{
      padding: 1.25rem; text-align:center; color: var(--slate-600);
      border-top:1px solid var(--border); background:#fff;
    }
    .powered{ font-weight:600; }
    .powered .ktb{ color: var(--orange-500); font-weight:800; }

  </style>
</head>
<body>

  <header>
    <div class="logo" aria-hidden="true">
      <svg viewBox="0 0 24 24" fill="none">
        <path d="M5 8.5C5 6.6 6.6 5 8.5 5h7A3.5 3.5 0 0 1 19 8.5V19a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V8.5Z" stroke="currentColor" stroke-width="1.6"/>
        <path d="M12 8v3M10.5 9.5h3" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
      </svg>
    </div>
    <div class="brand">
      <div class="tagline"><span class="care">Care Together.</span> <span class="stay">Stay Together.</span></div>
      <!-- (subline removed by request) -->
    </div>
  </header>

  <!-- Gradient nav buttons; sections are on the same page -->
  <div class="topnav">
    <button class="navbtn" id="btn-info"   data-target="#section-info">Patient Information</button>
    <button class="navbtn" id="btn-vitals" data-target="#section-vitals">Patient Vital Signs</button>
  </div>

  <main id="main">
    <!-- ONE PAGE: both sections below -->

    <!-- Patient Information -->
    <section class="card" id="section-info">
      <h2 class="section-title">Patient Information</h2>
      <form id="infoForm" autocomplete="on">
        <div class="grid cols-2">
          <div>
            <label for="nurseFirst">Nurse First Name</label>
            <input id="nurseFirst" name="nurseFirst" placeholder="e.g., Ama" />
          </div>
          <div>
            <label for="nurseLast">Nurse Last Name</label>
            <input id="nurseLast" name="nurseLast" placeholder="e.g., Mensah" />
          </div>
        </div>

        <div class="grid cols-2">
          <div>
            <label for="patientName">Patient Name</label>
            <input id="patientName" name="patientName" placeholder="e.g., Kofi Asare" />
          </div>
          <div>
            <label for="whatsapp">Recipient WhatsApp Number (with country code)</label>
            <input id="whatsapp" name="whatsapp" inputmode="tel" placeholder="+233xxxxxxxxx" />
            <div class="hint">Example: +233240000000</div>
          </div>
        </div>

        <div class="grid cols-3">
          <div>
            <label for="age">Age</label>
            <input id="age" name="age" type="number" min="0" placeholder="e.g., 58" />
          </div>
          <div>
            <label for="gender">Gender</label>
            <select id="gender" name="gender">
              <option value="">Select…</option>
              <option>Female</option>
              <option>Male</option>
            </select>
          </div>
          <div>
            <label for="weekOf">Week of</label>
            <input id="weekOf" class="teal-input" name="weekOf" type="date" />
          </div>
        </div>

        <!-- Time box removed on this section by request -->
      </form>
    </section>

    <!-- Patient Vital Signs -->
    <section class="card" id="section-vitals">
      <h2 class="section-title">Patient Vital Signs</h2>
      <form id="vitalsForm" autocomplete="on">
        <div class="grid cols-3">
          <div>
            <label for="vdate">Date</label>
            <input id="vdate" name="vdate" type="date" class="teal-input" />
          </div>
          <!-- Time input removed; app will register automatically -->
          <input id="vtime" name="vtime" type="hidden" />
          <div>
            <label for="hr">Heart Rate (bpm)</label>
            <input id="hr" name="hr" type="number" min="0" placeholder="e.g., 76" />
          </div>
          <div>
            <label for="bpSys">Systolic (mmHg)</label>
            <input id="bpSys" name="bpSys" type="number" min="0" placeholder="e.g., 120" />
          </div>
          <div>
            <label for="bpDia">Diastolic (mmHg)</label>
            <input id="bpDia" name="bpDia" type="number" min="0" placeholder="e.g., 78" />
          </div>
        </div>

        <div class="grid cols-3">
          <div>
            <label for="temp">Temperature (°C)</label>
            <input id="temp" name="temp" type="number" step="0.1" placeholder="e.g., 36.7" />
          </div>
          <div>
            <label for="resp">Respiratory Rate (breaths/min)</label>
            <input id="resp" name="resp" type="number" min="0" placeholder="e.g., 16" />
          </div>
          <div>
            <label for="spo2">SpO₂ (%)</label>
            <input id="spo2" name="spo2" type="number" min="0" max="100" placeholder="e.g., 98" />
          </div>
        </div>

        <div class="grid cols-3">
          <div>
            <label for="glucose">Blood Sugar (mg/dL)</label>
            <input id="glucose" name="glucose" type="number" min="0" placeholder="e.g., 95" />
          </div>
          <div>
            <label for="weight">Weight (kg) (optional)</label>
            <input id="weight" name="weight" type="number" step="0.1" placeholder="e.g., 72.5" />
          </div>
          <div>
            <label for="notes">Notes</label>
            <input id="notes" name="notes" placeholder="Observations, symptoms…" />
          </div>
        </div>

        <!-- Medication (morning, afternoon, evening) -->
        <div class="grid cols-3">
          <div>
            <label for="medAM">Medication — Morning</label>
            <input id="medAM" name="medAM" placeholder="e.g., Metformin 500mg" />
          </div>
          <div>
            <label for="medPM">Medication — Afternoon</label>
            <input id="medPM" name="medPM" placeholder="e.g., Lisinopril 10mg" />
          </div>
          <div>
            <label for="medEV">Medication — Evening</label>
            <input id="medEV" name="medEV" placeholder="e.g., Atorvastatin 20mg" />
          </div>
        </div>

        <div class="actions">
          <button type="button" class="btn" id="shareWhatsApp">Share via WhatsApp</button>
          <button type="button" class="btn" id="shareEmail">Share via Email</button>
        </div>
      </form>
    </section>
  </main>

  <footer>
    <span class="powered">Powered by <span class="ktb">KarltheBrown</span></span>
  </footer>

  <script>
    // Smooth-scroll buttons + active highlighting
    const infoBtn = document.getElementById('btn-info');
    const vitalsBtn = document.getElementById('btn-vitals');
    const infoSec = document.getElementById('section-info');
    const vitalsSec = document.getElementById('section-vitals');

    [infoBtn, vitalsBtn].forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const target = document.querySelector(btn.dataset.target);
        target?.scrollIntoView({behavior:'smooth', block:'start'});
      });
    });

    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if(e.target.id==='section-info')  infoBtn.dataset.active = e.isIntersecting ? 'true':'false';
        if(e.target.id==='section-vitals') vitalsBtn.dataset.active = e.isIntersecting ? 'true':'false';
      });
    },{rootMargin:'-40% 0px -50% 0px', threshold:0.01});
    io.observe(infoSec); io.observe(vitalsSec);

    // Auto-set current time (hidden) when user focuses vitals
    const vtime = document.getElementById('vtime');
    function setNow(){
      const now = new Date();
      const pad = n => String(n).padStart(2,'0');
      const t = `${pad(now.getHours())}:${pad(now.getMinutes())}`;
      if (vtime) vtime.value = t;
    }
    document.getElementById('vitalsForm')?.addEventListener('focusin', setNow);

    // Gather + share helpers
    function val(id){ return document.getElementById(id)?.value?.trim() || ''; }
    function buildShareText(){
      const nurseFull = [val('nurseFirst'), val('nurseLast')].filter(Boolean).join(' ');
      const lines = [
        'Victoria Nurse — Patient Summary',
        `Nurse: ${nurseFull || '—'}`,
        `Patient: ${val('patientName') || '—'}`,
        `Week of: ${val('weekOf') || '—'}`,
        '',
        'Vitals:',
        `• Date: ${val('vdate') || '—'}  Time: ${val('vtime') || '(auto)'}`,
        `• HR: ${val('hr') || '—'} bpm`,
        `• BP: ${val('bpSys') || '—'}/${val('bpDia') || '—'} mmHg`,
        `• Temp: ${val('temp') || '—'} °C`,
        `• RR: ${val('resp') || '—'} /min`,
        `• SpO₂: ${val('spo2') || '—'} %`,
        `• Blood Sugar: ${val('glucose') || '—'} mg/dL`,
        val('weight') ? `• Weight: ${val('weight')} kg` : null,
        val('notes') ? `• Notes: ${val('notes')}` : null,
        '',
        'Medication:',
        val('medAM') ? `• Morning: ${val('medAM')}` : null,
        val('medPM') ? `• Afternoon: ${val('medPM')}` : null,
        val('medEV') ? `• Evening: ${val('medEV')}` : null,
      ].filter(Boolean);
      return lines.join('\n');
    }

    function normalizedPhone(raw){
      return (raw || '').replace(/[^\d+]/g,'');
    }

    document.getElementById('shareWhatsApp')?.addEventListener('click', ()=>{
      setNow();
      const phone = normalizedPhone(val('whatsapp'));
      const base = phone ? `https://wa.me/${encodeURIComponent(phone)}` : 'https://wa.me/';
      const url = `${base}?text=${encodeURIComponent(buildShareText())}`;
      window.open(url, '_blank');
    });

    document.getElementById('shareEmail')?.addEventListener('click', ()=>{
      setNow();
      const subject = encodeURIComponent(`Patient Vitals — ${val('patientName') || 'Unknown'} (${val('vdate') || ''})`);
      const body = encodeURIComponent(buildShareText());
      window.location.href = `mailto:?subject=${subject}&body=${body}`;
    });

    // Prevent default submits (no persistence)
    document.getElementById('infoForm')?.addEventListener('submit', e=>e.preventDefault());
    document.getElementById('vitalsForm')?.addEventListener('submit', e=>e.preventDefault());

    // Service worker registration (auto subpath)
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        const SW_VERSION = 'v12';
        const swUrl = new URL('service-worker.js?v=' + SW_VERSION, window.location.href);
        navigator.serviceWorker.register(swUrl.toString())
          .then(reg => reg.update())
          .catch(console.error);
      });
    }
  </script>
</body>
</html>
